---
title: Linux学习笔记
tags:
  - Linux
  - 学习笔记
categories:
  - Linux
abbrlink: 15279
date: 2025-07-15 16:30:00
---

# 1目录结构

**linux中，一切皆为文件**

- \	根目录
- /bin (binary)里面放着最常用的命令
- /sbin (super user binary)存放系统管理员使用的系统管理程序
- /home 普通用户的主根目录
- /root 系统管理员根目录
- /lib 开机所需要的最基本的动态链接共享库，几乎所有应用程序都需要用到这些共享库
- /lost+found 当非法关机后里面会存放一些文件
- /etc 所有系统管理所需要的配置文件和子目录
- /usr 用户很多应用程序和文件放在这个目录下
- /boot 启动linux所需要的一些核心文件，包括连接文件和镜像文件	
- /proc 这是有一个虚拟的目录，是系统内存的映射，通过访问这个目录来获取一些系统信息
- /srv (service)存放服务启动后所需要提取的一些数据
- /tmp 用该目录存放一些临时文件
- /dev 把所有的硬件用文件形式存储
- /media linux将识别到的一些设备如U盘光驱等挂载到这个目录里。
- /mnt 用于临时挂载其他的文件系统 
- /opt 额外安装软件所存放的目录
- /usr/local 是另一个给主机额外安装软件的安装目录
- /var 不断扩大的目录，包括一些日志文件
- /selinux linux的一个安全子系统

# 2 vim的介绍

# 3 快捷键的使用

`使用vim命令打开vim文本编辑器，输入i进入插入模式（编写模式）`

`在插入模式中输入！进入命令行模式 `

![](C:\Users\www15\Documents\pdf\typora\BaiduSyncdisk\屏幕截图 2022-05-11 172115.png)

命令行模式：
```
wq 保存退出
q 退出
q！强制退出
/关键词  在文件中查找这个关键词
set nu 设置行号
set nonu 关闭行号显示
```

一般模式：

```
yy 复制当前行
p 将复制的东西粘贴到当前行
5yy 复制当前以及一下五行
dd 删除当前行
5dd 删除五行
gg 回到首行
G 跳转到最后一行
u 撤销刚才的操作 
3 G   跳转到3行
```

# 4 命令

## 关机

```
shutdown -h now 立即进行关机
shutdown -h 1 一分钟后关机shutdown 默认为这条命令
shutdown -r now 立即重启
halt 关机
reboot 立刻重启系统
sync 把内存的数据同步到磁盘
```

## 登录与注销

```
切换用户 su - 用户名 
logout 注销用户
```

## 用户管理

- 添加

  ```shell
  useradd 用户名
  创建的该用户自动存放到 /home/目录下（并且创建一个与该用户名同名的组，将其加入到其中）
  useradd -d  指定的目录  用户名
  该目录是属于该用户的
  ```

- 修改密码

  ```shell
  passwd 用户名 为该用户修改用户名，如果不添加用户名，则为给当前登录的用户修改用户密码。
  ```

- 删除用户

  ```shell
  删除用户保留家目录
  在root下，使用userdel 用户名
  
  删除用户不保留家目录
  在root下，用userdel -r 用户名
  ```

- 查询用户信息

  ```shell
  id 用户名
  whoami/who am i 查询第一次登录该主机的用户信息
  ```

  

**用户组**：具有相同权限的一组用户，方便管理。

- 对组的操作

  ```shell
  groupadd 组名 #添加一个组
  groupdel 组名 #删除一个组
  useradd -g 组名 用户名 #将该用户加入到这个组中，这个用户是新用户
  usermod -g  组名 用户名  #将一个用户切换到另外一个组中 
  ```

- /etc/passwd 存放着用户的配置文件，文件中记录着用户的各种信息（用户名：口令：用户标识号：组标识号：注释性描述：主目录：登录shell）

- /etc/shadow 口令配置文件（登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志）

- /etc/group 组的配置文件，记录这linux包含的组的信息（组名：口令：组标识号：组内用户列表）

## 实用指令

linux的运行级别常用的是3（多用户状态有网络服务）和5（图形化界面）

```shell
init 数字  #表示切换到那个运行级别
systemctl get-default  #查看默认运行级别（graphical.target表示5，multi-user.target)
systemctl set-default multi-user.target #设置默认级别为3，重启后直接进入3级别） 	 
```

- 如何找回root密码

- 使用帮助指令

  ```shell
  man 加指令 #列出该指令的使用方法
  help 指令  #获得shell内置命令的帮助信息
  ```

  内部命令是shell程序的一部分，在加载shell的时候就直接放到内存中。而外部命令是分shell命令的其他程序自带的命令，通常存放在/bash目录下，调用的速度慢于内部命令。

  man命令包含了内部命令和外部命令。help仅仅包含了内部命令。

## 对文件的操作

### 常用

```shell
pwd   显示当前目录的绝对路径
ls 	-a 显示当前目录的所有文件
    -l 以列表的形式显示信息
cd 切换目录
   ~ 回到当前用户的家目录
   .. 回到当前目录的上一级目录 
   ../../返回两级
```

---

### 创建与删除

```shell
mkdir  #创建文件夹
	-p #创建多级目录的文件夹
touch  #创建一个空文件
rmdir #删除目录（空目录）
rm（remove）  
	-rf  #递归删除整个文件夹且不提示
	-f  #强制删除文件不提示
	-r #递归删除整个文件夹
```

### 复制移动

---

```shell
cp 文件名 目标路径 #复制文件
cp -r 文件夹路径 目标路径 #将该文件夹的所有文件（包括该文件夹）拷贝到目标路径
\cp  #强制覆盖，不会提示是否覆盖文件
```

---

```shell
mv 文件的路径 目标文件夹的路径 #在不同目录下才为移动
mv 目标文件名 重命名文件名 #在同一目录下对文件重命名
mv 文件路径 目标文件路径 #将该文件移动到目标文件处，名字为目标文件名
mv 文件夹路径 目标文件夹路径 #将该文件夹移动到目标文件夹下
```

### 查看与显示

---

```shell
cat #查看文件内容
	-n #显示行号
cat 文件路径 | more #通过more查看该文件
more 文件路径 #使用more查看文件
less #使用less程序查看文件
head 文件 #输出文件的开头部分，默认前十行。
	-n num  #查看前num行
tail 文件  #显示文件尾部，默认前十行
	-n num
	-f #实时显示文件的更新 
```

![less使用命令](C:\Users\www15\Documents\pdf\typora\BaiduSyncdisk\无标题.png)

---

```shell
echo  [选项] [输出内容] #将内容输出到控制台
>  #重定向，覆盖
>>  #重定向，追加
ls -l >文件名  #将列表内容覆盖写入到文件中
ls -al >文件名 #将列表内容追加到文件末尾 
cat 文件 > 文件
echo "内容" >> 文件
```

### 链接文件的创建

```shell
ln 	-s 原文件或目录 链接文件名或目录 #给原文件创建一个软链接
rm 符号链接 #删除该链接（将该链接识别为文件）
```

###  查找命令

```shell
 find 指定目录 #从指定目录向下递归查找
 find 指定目录 -name 文件名 #按照指定的文件（*作为通配符）
 			-user #查找属于用户名的
 			-size #+200M 表示大于；-n 小于；n 等于
```

```shell
updatedb #更新locate建立的数据库
locate 文件名 #根据这个数据库查找文件所在目录
which 指令名 #查看指令存放位置
```

```shell
grep #过滤查找，通常与|管道符搭配使用
cat 文件 | grep "查找的内容" #只显示含有查找内容的行
	-n #显示行号
	-i #忽略大小写
```

### 压缩指令

```shell
gzip 文件  #压缩
gunzip 文件 #解压
```

```shell
zip 压缩后的文件.zip 文件
	-r #递归压缩目录
unzip -d 指定的目录 压缩文件
```

```shell
tar #既可以解压，也可以压缩文件。
	-c #产生.tar打包文件
	-v #显示详细信息
	-f #指定压缩后的文件名
	-z #打包同时压缩
	-x #解包.tar文件
	-zcvf 压缩后的文件名 文件 #压缩文件 	
    -zxvf #解压文件到当前文件夹
    -zxvf 压缩文件 -C 解压后存放的路径 #解压到指定目录 
```

## 历史操作查询

```shell
history #显示历史的指令操作
history num #显示历史最近的num条指令
!num #执行曾经执行的第num条指令
```

## 时间日期

---

```shell
date #显示当前的时间
date +%Y
date +%M
date +%D
date "+%Y-%m-%d %H:%M:%S" #显示精确时间
date -s "2022-1-1 20:02:02" #设置时间
cal #查看日历
cal num #显示num年的所有月份日历 
```

# 5 组管理和权限管理

## 基本介绍

- linux的每个用户必须属于一个组
- linux的每个文件有所有者、所有组、其他组
- 一个文件属于某个组，那么这个组中的所有用户对该文件有一定的权限。其他组的用户对该文件也有一定的权限。

## 文件/目录的所有者

- 查看文件的所有者：`ls -ahl`
- 修改文件的所有者： `chown 用户名 文件名`
- `chown 新用户名:新组 文件/目录 #改变所有者和所在组`
- `-R 如果是目录则其中的所有子文件或目录都递归生效`

 ## 文件/目录 所在组

- 组的创建`groupadd 组名` 
- 组的删除`goupdel 组名` 
- 修改文件所在的组`chgrp 新组名 文件名`
- `chgrp -R 组名 目录名 #该目录下的所有文件和目录都修改`
- 查看有哪些组` cat etc/group`

- 当某个用户创建一个文件的时候，这个文件所在的组就是该用户所在的组。

## 用户所在组		

- 改变用户所在组`usermood -g 组名 用户名`
- `usermood -d 目录名 用户名 //改变用户登录的初时目录（但要保证该用户有进入这个目录的权限）`

## linux中的权限

 使用`ll`指令查看文件详情的时候，在文件名前面会有一些属性

<img src="C:\Users\www15\Documents\typora\文件属性.png" style="zoom:150%;" />

对该图片的解释：

- 第1-3位：文件所有者对文件的权限`wrx-分别表示可读、可写、可执行、没有权限`

- 第4-6位：文件所属组的用户对该文件的权限跟文件所有者的表示方法一样
- 第7-9位：其他组的用户对该文件的权限
- 1：表示文件硬链接数或者目录的子目录数
- 第一个root 表示文件所有者
- 第二个root为文件的所在组
- 1213:文件的大小（byte）
- Feb 2 09:39：最后修改的日期

**rwx作用在不同对象时的效果**

- 作用在文件上
  - [r]表示可读（read）：可以读取、查看
  - [w]代表可写（write）：可以修改，但是不代表可以删除该文件，能删除该文件的前提是，对该文件所在目录有写的权限，才能删除该文件
  - [x]代表可执行（execute）：可以被执行
- 作用在目录上
  - [r]可以读取，ls查看目录内容
  - [w]可以修改对目录创建、删除、重命名
  - [x]可以进入该目录

## 修改权限

```shell
u:所有者 g:所在组 o:其他用户 a:所有人
=:赋予权限 +:增加权限 -:去除权限
chmod u=rwx,g=rx,o=x 文件名/目录名  #给所有者读写执行权限，给所在组成员读执行权限，给其他用户执行权限
chmod o+w 文件名/目录名 #给其他用户增加写的权限
chmod a-x 文件名/目录名 #去除所有用户的执行权限
```

使用数字来进行权限的修改

```shell
r=4 w=2 x=1
1:x
2:w
3:wx
4:r
5:rx
6:rw
7:rwx
chmod 755  /test.txt #对test.txt权限进行修改，u=rwx,g=rx,o=rx
```

# service

service 命令用于对系统服务进行管理，比如启动（start）、停止（stop）、重启（restart）、重新加载配置（reload）、查看状态（status）等。不同的 Linux 发行版一般均会带有此命令，比如 RHEL、CentOS、SUSE、Ubuntu、Fedora 等。

# ssh

- 安装ssh-server 服务`sudo apt-get install openssh-server`
- 查看ssh-server是否启动 `ps -e | grep ssh`，没有显示则没有启动
- 启动ssh-server`sudo service ssh start`

## 问题

- `no hostkeys available`，解决办法`sudo ssh-keygen -A`
